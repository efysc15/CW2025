<?import com.comp2042.GameOverPanel?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.Group?>
<?import javafx.scene.layout.*?>
<?import java.net.URL?>

<StackPane fx:controller="com.comp2042.GuiController"
      xmlns:fx="http://javafx.com/fxml"
      style="-fx-background-image: url('background_image(2).jpeg'); 
             -fx-background-size: cover; 
             -fx-background-position: center;">

    <!-- ================= 1. MAIN GAME LAYOUT (HBox) ================= -->
    <HBox alignment="TOP_CENTER" spacing="30" maxWidth="650" maxHeight="550" style="-fx-background-color: black; -fx-border-color: cyan; -fx-border-width: 2; -fx-border-radius: 3; -fx-background-radius: 3; -fx-effect: dropshadow(gaussian, cyan, 20, 0.5, 0, 0);">
        
        <!-- 1. LEFT COLUMN: Hold Panel & Sidebar Buttons (VBox) -->
        <VBox alignment="TOP_CENTER" spacing="20">
            
            <VBox fx:id="holdBrickContainer" alignment="CENTER">
                <Label text="HOLD" textFill="WHITE"
                       style="-fx-font-weight: bold; -fx-font-size: 16px; -fx-padding: 15 0 0 0;"/>
                <GridPane fx:id="holdBrickPanel"
                          prefHeight="120" prefWidth="120"
                          style="-fx-background-color: #000000;"/>
            </VBox>

            <VBox fx:id="buttonBar" spacing="10" alignment="CENTER"/>

            <VBox fx:id="scoreContainer" alignment="TOP_LEFT">
                <Label text="SCORE" style="-fx-font-weight: bold; -fx-font-size: 16px; -fx-text-fill: white;"/>
                <Label fx:id="scoreLabel" text="0" style="-fx-font-weight: bold; -fx-font-size: 16px; -fx-text-fill: white;"/>
            </VBox>
            
        </VBox>
        
        <!-- 2. CENTER COLUMN: Game Board -->
        <StackPane fx:id="centerStack">
            
            <VBox spacing="10" alignment="TOP_CENTER">
                <Group>
                    <BorderPane fx:id="gameBoard">
                        <center>
                            <GridPane fx:id="gamePanel" vgap = "1" hgap = "1"
                                style="-fx-background-color: black; -fx-border-color: white; -fx-border-width: 1; -fx-border-radius: 3; -fx-background-radius: 3; -fx-effect: dropshadow(gaussian, white, 20, 0.5, 0, 0);" />
                        </center>
                    </BorderPane>

                    <GridPane fx:id="brickPanel" vgap="1" hgap="1"/>
                </Group>
            </VBox>

        </StackPane>
        
        <!-- 3. RIGHT COLUMN: Next Brick & Score -->
        <VBox alignment="TOP_CENTER" spacing="20">
            
            <VBox fx:id="nextBoxContainer" alignment="CENTER">
                <Label fx:id="nextLabel" text="NEXT" textFill="white"
                       style="-fx-font-weight: bold; -fx-font-size: 16px; -fx-padding: 15 0 0 0;"/>
                <GridPane fx:id="nextBrickPanel" hgap="2" vgap="2"
                          prefWidth="120" prefHeight="500"
                          style="-fx-background-color: #000000;"/>
            </VBox>
            
        </VBox>

    </HBox>

    <!-- ================= 2. GAME OVER NOTIFICATION (FULL WINDOW LAYER) ================= -->
    <!-- This StackPane is initially invisible and covers the whole screen when game over -->
    <StackPane fx:id="groupNotification" visible="false" style="-fx-background-color: rgba(0, 0, 0, 0.85);"> 
        <!-- The GameOverPanel component is instantiated here -->
        <GameOverPanel fx:id="gameOverPanel" 
                       StackPane.alignment="CENTER"/> 
    </StackPane>

    <!-- ================= 3. PAUSE OVERLAY (Full Window Layer) ================= -->
    <StackPane fx:id="pauseOverlay" visible="false" style="-fx-background-color: rgba(0, 0, 0, 0.85);">
        <VBox alignment="CENTER" spacing="40">
            
            <Label text="PAUSED" 
                   style="-fx-font-size: 48px; -fx-font-weight: bold; -fx-text-fill: white; -fx-effect: dropshadow(gaussian, #00FF7F, 20, 0.5, 0, 0);"/>
            
            <VBox fx:id="resumeContainer" alignment="CENTER" spacing="10"/>
            
        </VBox>
    </StackPane>

    <stylesheets>
        <URL value="@window_style.css"/>
    </stylesheets>

</StackPane>